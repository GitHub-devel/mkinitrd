-------------------------------------------------------------------
Thu Sep  9 14:50:46 CEST 2004 - agruen@suse.de

- Create missing /dev/shm directory.

-------------------------------------------------------------------
Fri Sep  3 20:59:08 CEST 2004 - olh@suse.de

- mkinitramfs: bind mount /etc/mtab to /proc/1/mounts

-------------------------------------------------------------------
Fri Sep  3 20:57:02 CEST 2004 - olh@suse.de

- mkinitramfs: copy the /tmp/net-*.conf files to /dev/nfsroot/ 

-------------------------------------------------------------------
Fri Sep  3 20:53:47 CEST 2004 - olh@suse.de

- mkinitramfs: set the hostname from dhcp reply

-------------------------------------------------------------------
Fri Sep  3 20:51:28 CEST 2004 - olh@suse.de

- mkinitramfs: ipconfig writes a /tmp/net-$interface.conf
  source the first one found to fill enviroment with dhcp reply

-------------------------------------------------------------------
Fri Aug 27 13:09:42 CEST 2004 - olh@suse.de

- mkinitramfs: create /dev/std{in,out,err} symlinks (#43338)

-------------------------------------------------------------------
Tue Aug 24 20:34:03 CEST 2004 - agruen@suse.de

- Remove support for the root_dir parameter: The same effect can
  be achieved by running mkinitrd with chroot inside the real
  root directory.
- Add missing -p flags to mkdirs.

-------------------------------------------------------------------
Sun Aug 22 22:41:17 CEST 2004 - olh@suse.de

- mkinitramfs: move mount $udev_root to avoid duplicate entries
  in /proc/self/mounts

-------------------------------------------------------------------
Sun Aug 22 20:47:27 CEST 2004 - olh@suse.de

- mkinitramfs: if nfsroot= is given, force root=/dev/nfs

-------------------------------------------------------------------
Sun Aug 22 20:37:14 CEST 2004 - olh@suse.de

- mkinitramfs: rearrange the kinit.sh code, mount /dev earlier,
  run mknod earlier, run udev on asynchronous events
  run debug shell before vendor script

-------------------------------------------------------------------
Sun Aug 22 20:15:08 CEST 2004 - olh@suse.de

- mkinitramfs: handle ip=*:* case, ipconfig is fixed

-------------------------------------------------------------------
Sun Aug 22 20:13:46 CEST 2004 - olh@suse.de

- mkinitramfs: get debug=true from enviroment

-------------------------------------------------------------------
Sat Aug 21 16:18:09 CEST 2004 - olh@suse.de

- mkinitramfs: fix typo in help text output

-------------------------------------------------------------------
Sat Aug 21 16:13:36 CEST 2004 - olh@suse.de

- mkinitramfs: check if lilo.conf is readable to avoid warning

-------------------------------------------------------------------
Fri Aug 20 11:22:24 CEST 2004 - olh@suse.de

- mkinitrd: /run_init must be s static binary because /lib is 
            already gone when it runs, take the klibc version

-------------------------------------------------------------------
Fri Aug 20 11:18:41 CEST 2004 - olh@suse.de

- mkinitrd: udevinfo.static is in /sbin again

-------------------------------------------------------------------
Thu Aug 12 15:11:41 CEST 2004 - hare@suse.de

- Added -g for including glibc binaries instead of klibc ones.

-------------------------------------------------------------------
Mon Aug  2 09:54:35 CEST 2004 - hare@suse.de

Initial update for SL9.2
- Added '-r' to mkinitrd to build initramfs instead of initrd.
- Removed 2.4.X code.
- Enabled udev as default for all modes.

-------------------------------------------------------------------
Mon Aug  2 08:37:53 CEST 2004 - hare@suse.de

- #43406: Fix modules loading error on SATA-only machines.

-------------------------------------------------------------------
Wed Jul 28 18:15:54 CEST 2004 - olh@suse.de

- mkinitramfs: (#42940 - LTC9911)
  all dev nodes belong to root, according to udev.permissions
  but some may be owned by a group other than root

-------------------------------------------------------------------
Wed Jul 28 15:21:28 CEST 2004 - hare@suse.de

- #42958: /sbin/MAKEDEV must be linked into /dev if
  existing.

-------------------------------------------------------------------
Wed Jul 28 10:39:51 CEST 2004 - hare@suse.de

- #43352: dasdview was not copied into the initrd;
  scsi modules were copied with no SCSI device present on S/390,
  and a symlink to sed were created with sed already present.

-------------------------------------------------------------------
Thu Jul  1 23:49:40 CEST 2004 - agruen@suse.de

- #42696: Lilo passes the root device number as three to four-digit
  hex number. Make mkinitrd recognize the dree-digit case
  correctly.

-------------------------------------------------------------------
Wed Jun 23 18:17:31 CEST 2004 - fehr@suse.de

- Add code that makes root filesystem on EVMS possible (#41198)
  
-------------------------------------------------------------------
Mon Jun 21 17:00:11 CEST 2004 - agruen@suse.de

- The udev helper scripts use /lib/klibc/bin/sh as their shell, so
  leave the shell where it comes from, and make /bin/sh a symlink
  to that location.
- Add a number of binaries the used scripts are using.
- Temporarily mount /dev/shm for the udev scripts.

-------------------------------------------------------------------
Sun Jun 20 20:07:19 CEST 2004 - agruen@suse.de

- #42250: Fix race when using lvm2 / device mapper / evms root
  file system in combination with udev: Need to wait for udev to
  create /dev/mapper/control.
- Add initrd=trace kernel command line option: turns on command
  tracing in linuxrc start-up script (set -x).

-------------------------------------------------------------------
Fri Jun 18 03:41:19 CEST 2004 - agruen@suse.de

- #42171: Always create an initrd. Not having one may create all
  sorts of problems: Bad boot configurations, udev device
  discovery will be missing, and maybe more.

-------------------------------------------------------------------
Fri Jun 18 02:55:26 CEST 2004 - agruen@suse.de

- With multiple root= kernel command line options, the last one is
  supposed to count.
- Lilo tries to be clever and strips off the /dev/ prefix from
  device names. Check and fix; this is needed for EVMS root.
- Convert some back-tick quoting to $() quoting.

-------------------------------------------------------------------
Mon Jun 14 11:51:48 CEST 2004 - olh@suse.de

- mkinitramfs: mount /proc correctly

-------------------------------------------------------------------
Thu Jun 10 22:47:38 CEST 2004 - agruen@suse.de

- #41896: Fix do_chroot.

-------------------------------------------------------------------
Wed Jun  9 01:25:37 CEST 2004 - agruen@suse.de

- #41821: mkinitrd / mkiniramfs vga mode scanning bug.

-------------------------------------------------------------------
Tue Jun  8 13:16:02 CEST 2004 - hare@suse.de

- Use IFS in a subshell to avoid errors.

-------------------------------------------------------------------
Tue Jun  8 12:38:08 CEST 2004 - agruen@suse.de

- #41765: Reset IFS to original value in one place.
- Reset initrd_bins between creating multiple initrds.

-------------------------------------------------------------------
Mon Jun  7 14:29:06 CEST 2004 - hare@suse.de

- mkinitrd: add sed to initrd if S/390 zfcp is used (#41484).

-------------------------------------------------------------------
Sat Jun  5 21:18:29 CEST 2004 - olh@suse.de

- mkinitramfs: create 32 mdN nodes, create isdninfo,
  remove sleep 3 in nfsmount

-------------------------------------------------------------------
Wed Jun  2 18:00:29 CEST 2004 - bk@suse.de

- mkinitrd: write commandline as command line in warning (#41542)

-------------------------------------------------------------------
Wed Jun  2 16:31:10 CEST 2004 - hare@suse.de

- mkinitrd: Emit warning if no disks are found (#41542).

-------------------------------------------------------------------
Wed Jun  2 12:50:43 CEST 2004 - hare@suse.de

- mkinitrd: Always activate all disks (#41484).

-------------------------------------------------------------------
Wed Jun  2 00:10:07 CEST 2004 - olh@suse.de

- mkinitramfs: add raid/lvm support if raid or dm-mod given with -m

-------------------------------------------------------------------
Tue Jun  1 15:01:17 CEST 2004 - hare@suse.de

- mkinitrd: Fix EVMS handling on S/390 (#40857).

-------------------------------------------------------------------
Mon May 31 20:30:34 CEST 2004 - olh@suse.de

- mkinitramfs: disable 'debug' per default in kinit.sh

-------------------------------------------------------------------
Mon May 31 19:44:22 CEST 2004 - olh@suse.de

- mkinitramfs: use modprobe.conf from -b <dir>/etc, if it exits

-------------------------------------------------------------------
Sun May 30 00:02:59 CEST 2004 - olh@suse.de

- mkinitramfs: if -m is given, expect that ALL required modules
  are given on cmdline, dont do autodetection for root filesystem
  type and lvm/md/dm in this case
  check also if /proc is mounted, do not fail if not
  this is required if the initrd is built for another host as user

-------------------------------------------------------------------
Sat May 29 23:36:31 CEST 2004 - olh@suse.de

- mkinitramfs: remove <() process substitution,
  doesnt work without proc. use 'here document' instead

-------------------------------------------------------------------
Sat May 29 23:25:31 CEST 2004 - olh@suse.de

- mkinitramfs: use -b dir in default_kernel_images()

-------------------------------------------------------------------
Sat May 29 23:19:29 CEST 2004 - olh@suse.de

- mkinitramfs-kinit.sh:
  remove hardcoded unconditional 42 panic timeout 

-------------------------------------------------------------------
Wed May 26 15:53:20 CEST 2004 - agruen@suse.de

- #41225: vga mode parsing bug.

-------------------------------------------------------------------
Wed May 26 15:11:04 CEST 2004 - olh@suse.de

- mkinitramfs: remove misleading error message. (#39625)

-------------------------------------------------------------------
Tue May 25 20:51:54 CEST 2004 - garloff@suse.de

- mkinitrd and mkinitramfs: Find iscsid in either /usr/sbin or 
  /sbin.

-------------------------------------------------------------------
Mon May 24 21:48:46 CEST 2004 - olh@suse.de

- mkinitramfs: fix nfsroot to take nfsroot=server:/dir

-------------------------------------------------------------------
Mon May 24 14:23:55 CEST 2004 - hare@suse.de

- Call devmap_mknod.sh if no udev is running

-------------------------------------------------------------------
Mon May 24 12:15:36 CEST 2004 - fehr@suse.de

- load dm-snapshot additionally to dm-mod it is needed for some
  configurations (#41022)

-------------------------------------------------------------------
Mon May 24 09:06:10 CEST 2004 - hare@suse.de

- add support for LVM2 as root filesystem for S/390.

-------------------------------------------------------------------
Sun May 23 02:27:09 CEST 2004 - olh@suse.de

- mkinitramfs: fix parsing of nfsroot=

-------------------------------------------------------------------
Wed May 19 01:14:29 CEST 2004 - garloff@suse.de

- Remove iSCSI TODO comments.
- BLIST_NOREPORTLUN has changed its value in the kernel.

-------------------------------------------------------------------
Thu May 13 18:07:54 CEST 2004 - fehr@suse.de

- add support for EVMS volume as root filesystem

-------------------------------------------------------------------
Thu May 13 14:55:44 CEST 2004 - hare@suse.de

- new-kernel-pkg: Only call zipl on S/390 if corresponding
  configuration file exists.

-------------------------------------------------------------------
Tue May 11 11:24:00 CEST 2004 - agruen@suse.de

- Install Kerntypes in /sbin/installkernel instead of in the
  kernel makefiles: installkernel knows about /boot.

-------------------------------------------------------------------
Sun May  9 18:34:20 CEST 2004 - olh@suse.de

- mkinitramfs: guess if root is on lvm
  remove root_dir support. doesnt work as user because chroot
  is required, and root can chroot anyway
  doesnt need any hacks, just write a /bootsplash file (#39902)

-------------------------------------------------------------------
Wed May  5 17:55:38 CEST 2004 - agruen@suse.de

- #39824: Fix bootsplash for non-standard resolutions.
- #39893: Remove working directory and its contents.
- Fix for lvm root with grub.

-------------------------------------------------------------------
Mon May  3 11:00:21 CEST 2004 - hare@suse.de

- new-kernel-pkg: Fixed embarrasing bug in call to zipl 
  (called with -v instead of -V)

-------------------------------------------------------------------
Thu Apr 29 21:09:50 CEST 2004 - olh@suse.de

- mkinitramfs:
  handle root on jfs
  put the fs driver for the root filesystem in the initrd, even
  if it is not listed in INITRD_MODULES

-------------------------------------------------------------------
Tue Apr 27 17:37:32 CEST 2004 - fehr@suse.de

- mkinitrd: add code to only activate the LVM VG that contains the 
  root fs to prevent problems as described in bug #32794

-------------------------------------------------------------------
Fri Apr 23 14:35:47 CEST 2004 - garloff@suse.de

- mkinitrd: Add support for new syntax of passing scsi_mod params
  with scsi_mod. prefix. Translate old options, where possible.

-------------------------------------------------------------------
Tue Apr 20 00:55:20 CEST 2004 - olh@suse.de

- mkinitramfs changes:
  copy raidautorun

-------------------------------------------------------------------
Mon Apr 19 17:59:13 CEST 2004 - olh@suse.de

- mkinitramfs changes:
  detect root on raid correctly

-------------------------------------------------------------------
Sun Apr 18 21:54:02 CEST 2004 - olh@suse.de

- mkinitramfs changes:
  workaround chicken/egg bug in mdadm and raidautorun
  they do the ioctl on the not yet existing device node...

-------------------------------------------------------------------
Sat Apr 17 18:35:27 CEST 2004 - olh@suse.de

- mkinitramfs changes:
  remove files in initramfs to release memory
  print hint if booted with 'debug'
  be less verbose in mkinitramfs

-------------------------------------------------------------------
Wed Apr 14 12:18:48 CEST 2004 - hare@suse.de

- Fixed loading of dasd module if no dasd= parameter is set.
- Configure dasd devices via sysfs for empty dasd= parameter.

-------------------------------------------------------------------
Sun Apr  4 20:07:27 CEST 2004 - agruen@suse.de

- Add a missing `fi'.
- Explicitly create udev2 device inodes (--mknodes).

-------------------------------------------------------------------
Sat Apr  3 18:19:02 CEST 2004 - agruen@suse.de

- #37290: Fix mkinitrd for root filesystem on lvm on software
  raid; add fallback to scan sysfs if udev fails.

-------------------------------------------------------------------
Fri Apr  2 16:38:13 CEST 2004 - hare@suse.de

- mkinitrd: Add support for large device numbers.

-------------------------------------------------------------------
Thu Apr  1 22:06:32 CEST 2004 - agruen@suse.de

- Report failure if binaries are not found.
- Add devnumber klibc binary.
- Actually include raidautorun in the initrd.

-------------------------------------------------------------------
Thu Apr  1 16:17:41 CEST 2004 - agruen@suse.de

- #32794: Run raidautorun also when the root filesystem is LVM but
  not a RAID, and there are RAIDs configured in the rest of the
  system: Otherwise lvm may wrongly think that the RAID is multipath
    attached storage, and corrupt data.

-------------------------------------------------------------------
Tue Mar 30 22:43:31 CEST 2004 - agruen@suse.de

- mkinitrd:
  + Dereference symbolic link in hex_dev_number (fehr@suse.de).
  + Get rid of static device numbers, clean up device number
    checking.
  + Remove -u option (to disable udev); it's mandatory now anyway.
  + Don't run createpartitiondevs (an ash extension) with udev.
  + Small fix for uml.

-------------------------------------------------------------------
Tue Mar 30 13:23:04 CEST 2004 - olh@suse.de

- mkinitramfs: add sr_mod to initrd as a workaround for #37943
  create /dev/shm earlier in /init
  copy rm binary and /etc/sysconfig/hardware to initramfs

-------------------------------------------------------------------
Sun Mar 28 23:27:24 CEST 2004 - agruen@suse.de

- Added support for S/390 zfcp disks with kernel 2.6
  (hare@suse.de).
- Fix syntax error checking for device mapper; cleanups.

-------------------------------------------------------------------
Thu Mar 25 13:36:57 CET 2004 - agruen@suse.de

- Rework the entire nfs-root/dhcp/pivot-root logic.
- Fix two issues in iscsi support.
- Suport for device-mapper based root files (fehr@suse.de)
- Fix udev/lvm/device-mapper initialization order.
- Don't create static lvm/device-mapper inodes when using udev.

-------------------------------------------------------------------
Mon Mar 22 15:44:03 CET 2004 - agruen@suse.de

- Copy the root filesystem device inode into the initrd only when
  not using udev.
- Don't leave DHCP mode when root=/dev/nfs. Add af_packet module
  that is apparently needed by DHCP.
- Don't use stat(1): it's missing on old distros.

-------------------------------------------------------------------
Fri Mar 19 14:57:50 CET 2004 - hare@suse.de

- Update mkinitrd to use udev for creating device nodes.
- Update mkinitrd to pick up modular IDE drivers.

-------------------------------------------------------------------
Tue Mar 16 14:16:14 CET 2004 - schwab@suse.de

- Fix quoting.

-------------------------------------------------------------------
Tue Mar 16 10:48:16 CET 2004 - hare@suse.de

- Fixed new-kernel-pkg for correctly updating /etc/zipl.conf.

-------------------------------------------------------------------
Tue Mar  9 21:47:08 CET 2004 - olh@suse.de

- mkinitramfs: create nodes for ppp and fb0, no sysfs support yet

-------------------------------------------------------------------
Tue Mar  9 16:49:43 CET 2004 - olh@suse.de

- quote variables in mkinitramfs for here documents

-------------------------------------------------------------------
Tue Mar  9 01:52:58 CET 2004 - olh@suse.de

- add mkinitramfs as mkinitrd on ppc
  mounts /dev as tmpfs, requires 2.6 kernel

-------------------------------------------------------------------
Wed Mar  3 15:15:38 CET 2004 - agruen@suse.de

- A small cleanup in the mkinitrd script.

-------------------------------------------------------------------
Mon Mar  1 02:05:11 CET 2004 - agruen@suse.de

- Clean up vga mode parsing for the boot splash.
- Mount /proc and /sys at the beginning of linuxrc, and unmount
  them at the end.
- Add iscsi support (patch from David Wysochanski
  <davidw@netapp.com> via Kurt Garloff <garloff@suse.de>).
- Update dasd configuration to kernel 2.6.

-------------------------------------------------------------------
Thu Feb 26 14:54:06 CET 2004 - agruen@suse.de

- mkinitrd: Some more quoting fixes.
- new-kernel-pkg: Merging the lilo and elilo branches broke; lilo
  was accidentally invoked in both cases.

-------------------------------------------------------------------
Wed Feb 25 14:09:29 CET 2004 - schwab@suse.de

- Fix syntax error in linuxrc.

-------------------------------------------------------------------
Tue Feb 24 15:17:01 CET 2004 - agruen@suse.de

- mkinitrd: Too much quoting removed in last change.

-------------------------------------------------------------------
Tue Feb 24 03:09:48 CET 2004 - agruen@suse.de

- Clean up the code in several places. Use $(..) instead of `..`.
- Add special case for /dev/cciss/* devices. A better solution is
  required; there are a lot more cases where there is no trivial
  mapping between the device inode under /dev and its sysfs entry.

-------------------------------------------------------------------
Mon Feb 23 19:49:02 CET 2004 - agruen@suse.de

- mkinitrd:
  + Clean up some s390 specific stuff.
  + Add & use do_chroot function.
  + Instead of parsing /etc/modules.conf, parse the output of
    modprobe -c.
- new-kernel-pkg: Merge almost-identical lilo + elilo cases.

-------------------------------------------------------------------
Fri Feb 20 13:37:43 CET 2004 - agruen@suse.de

- mkinitrd: Fix check parsing zipl.conf in s390_dasd().

-------------------------------------------------------------------
Fri Feb 20 02:07:04 CET 2004 - agruen@suse.de

- #34736: Handle whitespace in zipl.conf correctly.

-------------------------------------------------------------------
Mon Feb 16 17:13:23 CET 2004 - hare@suse.de

- Added S/390 zipl support in new-kernel-pkg.

-------------------------------------------------------------------
Mon Feb  2 17:50:51 CET 2004 - agruen@suse.de

- Add device mapper / lvm2 support (from sbose@suse.de).

-------------------------------------------------------------------
Fri Jan 16 17:36:01 CET 2004 - schwab@suse.de

- Run elilo in new-kernel-pkg.

-------------------------------------------------------------------
Fri Dec  5 15:16:06 CET 2003 - hare@suse.de

- Checked out new version from CVS: Removed s390 special case
  for image selection.

-------------------------------------------------------------------
Thu Dec  4 16:16:58 CET 2003 - ro@suse.de

- added manpage mkinitrd.8 

-------------------------------------------------------------------
Wed Nov 26 14:01:53 CET 2003 - agruen@suse.de

- Fix a syntax error and the module list info (don't show params).

-------------------------------------------------------------------
Sat Nov 22 11:38:37 CET 2003 - agruen@suse.de

- Re-add patch from Carsten Grohmann (which was accidentally lost
  beacuse it was not committed to the CVS).

-------------------------------------------------------------------
Fri Nov 21 12:05:25 CET 2003 - agruen@suse.de

- Update for 2.6 kernel on s390 and zSeries (hare@suse.de).
- Invoke /sbin/elilo to update the efi partition on ia64.

-------------------------------------------------------------------
Tue Nov 18 13:43:38 CET 2003 - kukuk@suse.de

- Loading SELinux policy: Add patch from Carsten Grohmann for
  better output.

-------------------------------------------------------------------
Tue Nov 11 15:53:59 CET 2003 - agruen@suse.de

- Scan kernel cmdline, and pass scsi parameters to scsi_mod:
  Otherwise no scsi params can be passed on the cmdline.

-------------------------------------------------------------------
Tue Oct 28 17:05:17 CET 2003 - agruen@suse.de

- Add `-C /etc/modprobe.conf' only if this file actually exists:
  The modprobe for 2.6 kernels can also run without a config
  file.

-------------------------------------------------------------------
Mon Oct 27 16:00:25 CET 2003 - agruen@suse.de

- Increase the initial initrd image size: 10000 1k blocks
  is too small for the k_debug kernel.

-------------------------------------------------------------------
Thu Oct 23 12:59:41 CEST 2003 - agruen@suse.de

- Fix for #32625: mkinitrd handles `-b /' incorrectly.
- Handle use_selinux like all other flags.
- From snwint@suse.de (+changes from me): Fix bootsplash on SLES8.
- From bk@suse.de: Some zfcp fixes.

-------------------------------------------------------------------
Wed Oct 15 20:00:57 CEST 2003 - kukuk@suse.de

- Fix selinux support
- Always use mount/umount -n in initrd
- Always create initrd if selinux support is requested

-------------------------------------------------------------------
Wed Oct 15 13:35:15 CEST 2003 - kukuk@suse.de

- Add optional selinux support

-------------------------------------------------------------------
Fri Oct 10 10:23:45 CEST 2003 - schwab@suse.de

- Fix typo.

-------------------------------------------------------------------
Fri Oct 10 08:53:22 CEST 2003 - agruen@suse.de

- Skip over linux-gate.so.1, which is a library mapped into the
  process by 2.6 kernels.

-------------------------------------------------------------------
Thu Oct  9 14:47:47 CEST 2003 - agruen@suse.de

- Fix vga mode parsing (wrongly was taking "ex" for a hex number).
- Use generic versions of libraries: On some systems we have
  generic as well as optimized libraries, but the optimized
  libraries may not work with all kernel versions.

-------------------------------------------------------------------
Thu Oct  2 18:58:55 CEST 2003 - bk@suse.de

- fix initrd creation on S/390(only tested w/ dasd, not with zfcp!)
- pass module parameters from /etc/modules.conf to linuxrc

-------------------------------------------------------------------
Wed Oct  1 09:38:34 CEST 2003 - schwab@suse.de

- new-kernel-pkg: handle elilo.

-------------------------------------------------------------------
Mon Sep 29 22:01:49 CEST 2003 - kukuk@suse.de

- Add %defattr

-------------------------------------------------------------------
Mon Sep 29 20:00:32 CEST 2003 - agruen@suse.de

- There is no mkdir in the initrd: Create all needed directories
  when creating the initrd.  Use `mkdir -p' instead of `mkdir'.
- A minor cleanup.

-------------------------------------------------------------------
Tue Sep 23 15:55:40 CEST 2003 - agruen@suse.de

- The previous change from using killall to kill was incomplete
  (kill is located in /bin; killall is in /usr/bin).
- Temporary mount shm to /etc/lvmtab.d to create space for lvm
  commands (#26073).
- Add some changes that got lost with the previous update.

-------------------------------------------------------------------
Fri Sep 19 03:00:30 CEST 2003 - agruen@suse.de

- new-kernel-pkg: Change /dev/stderr to &2 -- otherwise it fails
  in build envs.

-------------------------------------------------------------------
Thu Sep 18 10:35:05 CEST 2003 - kraxel@suse.de

- linuxrc does rootfs device scan via sysfs after loading the
  modules.  2.6.x kernels only, fixes bug #30771.

-------------------------------------------------------------------
Tue Sep 16 16:10:01 CEST 2003 - agruen@suse.de

- Add missing $root_dir prefixes, and replace some remaining
  occurrences of `/boot' with $boot_dir.
- Prevent readlink macro from printing an error message for missing
  files (the "real" readlink also fails without messages).
- Add xfs_dmapi and xfs_support to the list of modules that may
  be missing without causing an error (they no longer exist).
- Add md to list of introduced modules.
- temporarly mount shm to /etc in the linuxrc script to have more
  space available for lvm commands (#26073).

-------------------------------------------------------------------
Thu Sep  4 09:08:24 CEST 2003 - agruen@suse.de

- Add xfs_dmapi and xfs_support to the list of modules that may
  be missing without causing an error (they no longer exist).
- Fix typo, add md to list of introduced modules, minor clean-ups.

-------------------------------------------------------------------
Mon Sep  1 15:23:24 CEST 2003 - agruen@suse.de

- Put mkinird script under cvs control, and remove the inconsistent
  change log that used to be part of the script. The repository
  location is: /suse/yast2/cvsroot/mkinitrd/.
- Remove now-obsolete oem resize support.

-------------------------------------------------------------------
Mon Sep  1 12:53:22 CEST 2003 - mls@suse.de

- dhcp: allow servername in rootpath (#29791)

-------------------------------------------------------------------
Sun Aug 31 23:40:35 CEST 2003 - agruen@suse.de

- Fix broken check: mount, umount and the surrounding files were
  missing in initrd's.

-------------------------------------------------------------------
Wed Aug 27 15:50:14 CEST 2003 - agruen@suse.de

- Prevent mkinitrd warnings for scsi_mod and sd_mod, which may
  have been added to INITRD_MODULES implicitly after a kernel
  update.
- Another minor fix in the ACPI DSDT code.

-------------------------------------------------------------------
Tue Aug 26 17:34:21 CEST 2003 - agruen@suse.de

- Clean up ACPI DSDT code.
- Add internal option use_static_binaries than can be turned off
  to use dynamically linked binaries (for bug hunting).
- Fix for systems that don't have a modprobe.old binary.

-------------------------------------------------------------------
Mon Aug 25 01:17:22 CEST 2003 - ro@suse.de

- fix syntax error in last change 

-------------------------------------------------------------------
Fri Aug 22 17:28:07 CEST 2003 - trenn@suse.de

- Added support to attach an DSDT (acpi) to the initrd
  there will exist a kernel option soon, to load a DSDT from
  the initrd and substitute the DSDT from the BIOS.
  The compiled DSDT can be indicated either in /etc/sysconfig/kernel for permanent
  load or the path to the DSDT can be given to mkinitrd  via the -a parameter

-------------------------------------------------------------------
Thu Aug 14 10:12:23 CEST 2003 - agruen@suse.de

- Don't depend on /usr/bin/readlink utility: it is not present
  on older distributions.

-------------------------------------------------------------------
Fri Aug  8 15:43:12 CEST 2003 - agruen@suse.de

- Automatically also require sd_mod (SCSI disk) if scsi_mod is
  required: It is reasonable to assume that the root file system
  is on a SCSI disk in that case.

-------------------------------------------------------------------
Fri Aug  8 14:21:06 CEST 2003 - agruen@suse.de

- Fix a check in mkinird script: No need to invoke initrd on
  /boot/vmlinuz if that file is a symlink.
- Update mkinitrd help text.

-------------------------------------------------------------------
Tue Aug  5 17:10:00 CEST 2003 - agruen@suse.de

- Don't call rpm from inside mkinitrd: mkinitrd is itself called
  from rpm in the binary kernel packages; recursive rpm is not
  possible.
- Fix bugs if mkinitrd is called with a different root directory.
- Unclutter mkinitrd's output.
- #28484: Use kill instead of killall in the initrd in the dhcp
  specific code: killall apparently would require an additional
  shared library.

-------------------------------------------------------------------
Thu Jul 31 16:05:55 CEST 2003 - agruen@suse.de

- Fix heuristic for recognizing installed kernel RPMs and their
  binary image files.
- If /boot/vmlinuz is a symlink to /boot/vmlinuz-$VERSION and
  /boot/initrd is a regular file, replace /boot/initrd with a
  symbolic link to /boot/initrd-$VERSION when creating that
  initrd image. This ensures that /boot/vmlinuz and /boot/initrd
  belong to the same kernel.

-------------------------------------------------------------------
Mon Jul 28 12:18:46 CEST 2003 - agruen@suse.de

- Fix test which version of modprobe to use (was testing
  for 2.5.*).

-------------------------------------------------------------------
Wed Jul 16 13:11:24 CEST 2003 - kraxel@suse.de

- fix creation of mk_initrd link.

-------------------------------------------------------------------
Wed Jul  2 20:20:39 CEST 2003 - kraxel@suse.de

- build initrds for all installed kernel rpms.
- fix 2.5.x issues.

-------------------------------------------------------------------
Fri Jun  6 18:13:18 CEST 2003 - agruen@suse.de

- new-kernel-pkg was in DOS file format: How did *that* happen ??
- mkinitrd:
  + Recognize correctly if no modules are being used.
  + Pipe config file to depmod via stdin so chroot doesn't matter.

-------------------------------------------------------------------
Fri Jun  6 10:38:01 CEST 2003 - schwab@suse.de

- Handle LOADER_TYPE elilo.
- Fix syntax errors.

-------------------------------------------------------------------
Wed Jun  4 18:13:31 CEST 2003 - agruen@suse.de

- Merge in improved mkinitrd script. There are a number of
  comments tagged with FIXME that seem unclear to me.

-------------------------------------------------------------------
Tue Jun  3 14:57:35 CEST 2003 - stepan@suse.de

- Get bootsplash theme name dynamically from sysconfig file.
  This obsoletes SuSEconfig.bootsplash

-------------------------------------------------------------------
Mon May 26 12:40:59 CEST 2003 - agruen@suse.de

- Remove initial install vs. upgrade logic from new-kernel-pkg
  script. This is better dealt with in the k_* spec files. Invoke
  new-kernel-pkg script with the version of the kernel as $1
  (e.g., "2.4.20-99-default").
- Adjust installkernel script to new-kernel-pkg changes.

-------------------------------------------------------------------
Thu May 22 15:28:50 CEST 2003 - agruen@suse.de

- Split /sbin/mk_initrd from aaa_base.
- New /sbin/installkernel that is used be `make install' in the
  kernel sources.
- New /sbin/new-kernel-pkg scripts that kicks the boot loader
  (mainly lilo) after the kernel/initrd image has changed.
